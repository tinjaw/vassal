<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Layer</title>
  <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
</head>

<body>
<table border="0" cellpadding="2" cellspacing="2" width="100%">
  <tbody>
  <tr align="center">
  <td valign="top">
  <h1>VASSAL Reference Manual</h1>
  <small><a href="index.htm">Home</a> &gt; <a href="GameModule.htm">Module</a>
  &gt; <a href="PieceWindow.htm">Game Piece Palette</a></small> <small>&gt; <a href="GamePiece.htm">Game Piece</a>
  </small> <small>&gt; <b>Layer</b></small><br>
  </td>
  </tr>
  <tr>
  <td valign="top">
  <hr size="2" width="100%">
  <h2>Layer
  </h2>
  A Layer is the standard trait for adding images, sub-images, and image-swapping functionality to game pieces in
  VASSAL.&nbsp; A Layer consists of a number of "levels", each of which has an image and a name. A Layer may be
  "active" or "inactive", and only active layers are drawn--a Layer can be activated with a key command, and players can
  change the current level during play. The image from the current level will be drawn whenever the Layer is
  active. The Layer is drawn on top the traits that appear before it in the piece's list of traits.<br>
  <br>
  <table border="0" cellpadding="2" cellspacing="2" width="100%">
    <tbody>
    <tr>
    <td valign="top">
    <table style="width: 100%; text-align: left; margin-left: auto; margin-right: auto;" border="0" cellpadding="2"
      cellspacing="2">
      <tbody>
      <tr>
      <td style="text-align: center;"><img alt="" src="images/Layer.png"></td><td style="text-align: center;"><img
        alt="" src="images/Layer2.png"></td>
      </tr>
      </tbody>
    </table>
    <br>
    <b>Name:</b>&nbsp; The name of this Layer, used for reference during editing and as the prefix for the name of any 
    <a href="Properties.htm">Properties</a> defined by this Layer. <br>
    <br>
    <b>Always Active:</b>&nbsp; If checked, then this layer is always active, i.e. the image corresponding to the
    current level will always be displayed. If unchecked, then the layer must be activated (by the specified key
    command) in order to display the current level.<br>
    <br>
    <b>Underneath when highlighted:</b>&nbsp; If checked, then this layer will be drawn underneath the rest of the piece
    when the counter has been selected (e.g. by clicking on it).<br>
    <br>
    <b>Loop through levels:</b>&nbsp; If checked, then increasing the level past the last one will loop back to the
    first level and vice versa. Otherwise, increasing the level has no effect if the current level is the last
    level.<br>
    <br>
    <b>Offset:</b>&nbsp; The image for the current level is drawn with this offset from the center of the underlying
    piece by a number of pixels specified by the "offset" boxes, with positive numbers giving an offset down and to the
    right. For example, if a layer image is 40x40 pixels and you want it to be drawn so that the lower-left corner
    is at the center of the GamePiece, set the offset to 20,-20. <br>
    <br>
    <b>Levels follow expression value:</b>&nbsp; If selected, then you can enter an <a href="Expression.htm">Expression</a>
    that is evaluated to determine the active level, rather than having the trait respond directly to key commands.
    A typical case will reference the name of a <a href="DynamicProperty.htm">Dynamic Property</a>. You can
    also specify the numeric value of the Property that should correspond to the first level of this Layer.<br>
    <br>
    <b>Activate/Increase/Decrease:</b>&nbsp; Specify the key commands (or <a href="NamedKeyCommand.htm">Named Key
    Commands</a>) and right-click context menu text that will activate the Layer and increase or decrease the current
    level.<br>
    <br>
    <b>Reset to level:</b>&nbsp; Specifies a key command that resets the Layer to a level specified by an <a
      href="Expression.htm">Expression</a>. &nbsp;Note: this does <i>not</i> automatically <i>activate</i> the Layer.<br>
    <br>
    <b>Randomize:</b> &nbsp;Specifies a key command that sets the Layer to a random level.<br>
    <br>
    <b>Level Images:</b>&nbsp; Specify the image to be shown for each level of the layer by double-clicking the image field to add a new
    image, or selecting an existing image from the drop-down menu. An image can be left blank to display nothing
    for that level. Using transparency in the images can be very useful.<br>
    <br>
    <b>Level Name:</b>&nbsp; Each level can be given an individual name, which is used to change the name of the piece
    for reporting purposes during play. The level's name either replaces the piece's normal name, or else modifies
    the piece's normal name as a prefix or suffix. NOTE: each individual level has its own replace/prefix/suffix
    setting, which must be configured separately.<br>
    <br>
    <b>NOTES:</b>

    <ul>
      <li>Leaving a <i>Menu Command</i> field blank means no entry appears in the right-click context menu, but you can still
        use a keyboard shortcut or a <a href="NamedKeyCommand.htm">Named Key Command</a>.</li>

      <li>Key commands can be the same as those used by other traits. Pressing the key will perform all
        corresponding actions.</li>
    </ul>
    <b>EXAMPLES:</b><br>
    <ul>
      <li>For a basic two-sided counter, add a Layer, and select an image that represents the reverse side. Change
        "Activate" to "Flip" and set the key to Ctrl+F.</li>
      <li>An alternative approach to the same two-sided counter: rather than give the counter an image in the Basic
        Piece trait, remove that and instead have two images (one for each side of the counter) here in the Layer trait.
        Check the <i>Always Active</i> and <i>Loop Through Levels</i> box. Change "Increase" to "Flip" and its key command to
        Ctrl+F.
      </li>
      <li>To represent fatigue in an Army counter, give it a Layer named "Fatigue." &nbsp;Select <i>Always Active</i>, choose
        four images that represent the levels, and change "Increase" to "Increase Fatigue" and "Decrease" to "Decrease
        Fatigue". A Reset command named "Rest" using Ctrl+R could be used to bring the Army counter back to
        full strength. Name the levels " (fatigue 1)", etc., and check <i>is suffix</i> to append the current fatigue
        level to the piece's name.</li>
    </ul>
    <hr>A Layer defines a number of <a href="Properties.htm">Properties</a>.&nbsp; In the name of the properties, <i>
    &lt;layer_name&gt;</i> is the name of the overall Layer as specified in the top field of the properties.<br>

    <ul>
      <li><i>&lt;layer_name&gt;_Image
      </i>returns the name of the currently-active level's image file<i></i><i></i></li>
      <li><i>&lt;layer_name&gt;_Name
      </i>returns the name of the currently-active level<a href="Map.htm"></a></li>
      <li><i>&lt;layer_name&gt;_Level
      </i>returns the number of the current level<span style="text-decoration: underline;"></i><a href="Map.htm"></a></li>
      <li><i>&lt;layer_name&gt;_Active
      </i>returns <i>true</i>
        if the Layer is active, <i>false</i>
        otherwise</li>

    </ul>
    <b>EXAMPLE:</b>&nbsp; A Layer named <i>Manpower</i> that is active and showing level 4 defined with image <i>
    Man04.gif</i>
    and name <i>(strength 4)</i> would have the following properties:<br>

    <ul>
      <li style="font-style: italic;">Manpower_Image = Man04.gif</li>
      <li style="font-style: italic;">Manpower_Name = (strength 4)</li>
      <li style="font-style: italic;">Manpower_Level = 4</li>
      <li><i>Manpower_Active = true</i></li>

    </ul>
    These properties could be used in a <a href="GlobalKeyCommand.htm">Global Key Command</a> to automatically remove
    all counters whose manpower was zero.<br>
    </td>
    </tr>

    </tbody>
  </table>
  </td>
  </tr>
  <tr>
  </tr>

  </tbody>
</table>
</body>
</html>
