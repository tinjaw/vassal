<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Turn Counter</title>
  <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
</head>
<body>
<table border="0" cellpadding="2" cellspacing="2" width="100%">
  <tbody>
  <tr align="center">
  <td valign="top">
  <h1>VASSAL Reference Manual</h1>
  <small><a href="index.htm">Home</a> &gt; <a href="GameModule.htm">Module</a>
  &gt; <b>Turn Counter</b></small><br>
  </td>
  </tr>
  <tr>
  <td valign="top">
  <hr size="2" width="100%">
  <h2>Turn Counter<br>
  </h2>
  <table border="0" cellpadding="2" cellspacing="2" width="100%">
    <tbody>
    <tr>
    <td colspan="2">
    <div class="level2">
      <p>A Turn Counter places a button and/or widget on the <a href="Toolbar.htm">Toolbar</a> of the Module window which keeps track of the
      current turn/phase/sub-phase, etc. of a game. Players can advance the turn forward or backward, or optionally jump
      directly to a turn.
      </p>
      <p>
      To add a Turn Counter to your module, right click on the <i>[Module]</i> component at the very top of the Editor's
      configuration window list, and select <i>Add Turn Counter</i>. Then, after configuring its fields appropriately,
      you will find your new component's <i>[Turn Counter]</i> component entry at the bottom of the Module's list of
      components. You can right-click on the <i>[Turn Counter]</i> component entry to add sub-components to represent
      levels within your Turn structure (see details and examples below).
      </p>
      <p>
      <table border="0" cellpadding="2" cellspacing="2">
        <tbody>
        <tr>
        <td valign="top">
        <img src="images/TurnTrackerTurnWindow.png">
        </td>
        <td valign="top">
        <img src="images/TurnTrackerExample.png">
        </td>
        </tr>
        </tbody>
      </table>
      </p>
      <p>The Turn Counter is defined as a series of nested levels, each represented by a sub-component of the Turn
      Counter. "Advancing the turn" moves the <i>deepest</i> level forward. When a level wraps around, the next
      level above it (but under the same parent) advances forward. When the last, outermost, child level has
      wrapped around, the parent level itself advances forward.</p>
      <p><i><b>Example (see screenshots above and below):</b> A level representing the Month may contain a level
      representing the Day, which in turn contains a level representing Morning/Evening. Advancing the turn moves from
      morning to evening, then to morning of the next day, etc. Configuration for this example can be seen in the
      various screenshots throughout this article.</i></p>
      <p>Each level of the Turn Counter exposes its value as a module <a href="Properties.htm">Property</a>.
      A hotkey can be configured to fire when a certain combination of levels is reached.</p>
      The Turn Counter controls can be docked into the main Module Toolbar, or can be opened in a separate window that
      is shown/hidden via a button on the Toolbar. Whether the controls are docked is remembered in the player's
      preferences.
    </div>
    <br>
    <br>
    </td>
    </tr>
    <tr>
    <td valign="top">
    <b>Name:</b>&nbsp; A name for display in the <a href="Editor.htm">Editor</a> window<br>
    <br>
    <b>Button text:</b>&nbsp; The text of the <a href="Toolbar.htm">Toolbar</a> button to show/hide the controls when un-docked<br>
    <br>
    <b>Button Icon:</b>&nbsp; Icon for the <a href="Toolbar.htm">Toolbar</a> button.<br>
    <br>
    <b>Button Tooltip:</b>&nbsp; Optional tooltip text for the <a href="Toolbar.htm">Toolbar</a> button.<br>
    <br>
    <b>Show/hide Hotkey:</b>&nbsp; Keyboard shortcut or <a href="NamedKeyCommand.htm">Named Key Command</a> to hide or
    show the Turn Counter window when un-docked.<br>
    <br>
    <b>Next Turn Hotkey:</b>&nbsp; Keyboard shortcut or <a href="NamedKeyCommand.htm">Named Key Command</a> to advance
    the Turn Counter one step. The turn can also be advanced by clicking the "+" button displayed to the right of the
    turn when the turn counter is visible.<br>
    <br>
    <b>Previous Turn Hotkey:</b>&nbsp; Keyboard shortcut or <a href="NamedKeyCommand.htm">Named Key Command</a> to
    return the Turn Counter to the previous step. The turn can also be moved back by clicking the "-" button displayed
    to the left of the turn when the turn counter is visible.<br>
    <br>
    <b>Turn Name Format:</b>&nbsp; <a href="MessageFormat.htm">Message Format</a> to format the display of the current
    turn in the counter. All module-level <a href="Properties.htm">Properties</a> will be substituted. In
    particular, the properties exposed by any sub-components (Counters or Lists) can be used. In addition, the special
    properties <i>level1, level2</i>, etc. can be used to represent the values of the active Counter or List within the
    Turn Counter. <i>Example:</i> If the Turn Counter contains a Month level that contains a Day level, then<i>level1
    </i>gives the value of the Month and<i>level2</i>gives the Day.<br>
    <br>
    <b>Report Format:</b>&nbsp; <a href="MessageFormat.htm">Message Format</a> to display a message in the <a href="ChatLog.htm">Chat Log</a> whenever the turn changes.<br>
    <br>
    <b>Turn Label Tooltip Text:</b>&nbsp; Tooltip text for the Turn Display.<br>
    <br>
    <b>Turn Label Display Length:</b>&nbsp; Set the number of pixels wide the turn display label should be, or use 0 to
    let it float to suit the current turn display.<br>
    </td>
    <td valign="top"><img src="images/TurnTracker.png" alt=""><br>
    </td>
    </tr>
    <tr>
    </tr>
    </tbody>
  </table>
  </td>
  </tr>
  <tr>
  </tr>
  </tbody>
</table>
<hr>
<h2>Sub-Components<br></h2>To add a new level to your Turn Counter, open the <a href="Editor.htm">Editor</a> and navigate to your <i>[Turn
Counter]</i> component. Right-click on the <i>[Turn Counter]</i> component and select <i>Add List</i> or <i>Add Counter
</i>, depending on whether you want the level to be a list (e.g. "Spring", "Summer", etc) or a numeric value (e.g. 1914,
1915, etc). You can then optionally right-click on the new <i>[List]</i> or <i>[Counter]</i> you've just added, to add
another level beneath it, and so forth.<br>
<br>
You can also add a Global Hotkey to your Turn Counter (see below).
<h3><a name="List"></a>List</h3>
A List is a turn level that cycles through a specified list of text strings.<br>
<br>
<table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">
  <tbody>
  <tr>
  <td valign="top">
  <b>Description:</b>&nbsp; A brief description of this turn level, which will appear in the Editor's configuration
  window.<br>
  <br>
  <b>Property Name:</b>&nbsp; The name of the global <a href="Properties.htm">Property</a> that will hold the value of
  this level. The Global Property will be updated whenever this level's value changes.<br>
  <br>
  <b>Turn Level Format:</b>&nbsp; A <a href="MessageFormat.htm">Message Format</a> that specifies how the value of the 
  <i>level1, level2,</i> etc property will appear in the Turn Counter's Turn Name Format property.<br>
  <br>
  <b>List of Items</b>:&nbsp; A list of text strings that the level will cycle through.<br>
  <br>
  <b>Allow players to hide items in this list:</b>&nbsp; If selected, then players will be allowed to disable items in
  this list at game time.<br>
  <br>
  <b>Allow players to change which item goes first:</b>&nbsp; If selected, then players will be allowed to change which
  should be the beginning item in the list, i.e. the item at which the parent level will be advanced. <i>Example:</i>
  &nbsp; If a List represents sides in a game, but the order in which sides move is not always fixed.<br>
  <br>
  </td>
  <td valign="top"><img alt="" src="images/TurnTrackerList.png"></td>
  </tr>
  </tbody>
</table>
<h3><a name="Counter"></a>Counter</h3>
A Counter is a numeric turn level that advances by incrementing the value by a fixed amount. It can optionally loop
around when it reaches its maximum value.<br>
<br>
<table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">
  <tbody>
  <tr>
  <td valign="top">
  <b>Description:</b>&nbsp; A brief description of this turn level, which will appear in the Editor's configuration
  window.<br>
  <br>
  <b>Property Name:</b>&nbsp; The name of the global <a href="Properties.htm">Property</a> that will hold the value of
  this level. The Global Property will be updated whenever this level's value changes. <br>
  <br>
  <b>Turn Level Format:</b>&nbsp; A <a href="MessageFormat.htm">Message Format</a> that configures how the value of the 
  <i>level1, level2,</i> etc property will appear in the Turn Counter's Turn Name Format property.<br>
  <br>
  <b>Start Value:</b>&nbsp; The initial/minimum numeric value.<br>
  <br>
  <b>Increment By:</b>&nbsp; The amount by which the numeric value increases when the level advances.<br>
  <br>
  <b>Loop:</b>&nbsp; If selected, the level will return to its starting value after reaching the maximum value.<br>
  <br>
  <b>Maximum value:</b>&nbsp; The maximum value, after which the level will loop.<br>
  </td>
  <td valign="top"><img alt="" src="images/TurnTrackerCounter.png"></td>
  </tr>
  </tbody>
</table>
<br>
<h3><a name="Hotkey"></a>Global Hotkey</h3>
A Global Hotkey sub-component of a Turn Counter fires a key command or <a href="NamedKeyCommand.htm">Named Key Command
</a> whenever a certain state of the Turn Counter is reached.<br>
<br>
<i>Example:</i>&nbsp; When the Refit phase is reached, a hotkey can fire that corresponds to the keyboard shortcut of a 
<a href="Map.htm#GlobalKeyCommand">Global Key Command</a> that removes all Damage counters from pieces on the map.<br>
<br>
<table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">
  <tbody>
  <tr>
  <td valign="top">
  <b>Description:</b>&nbsp; A brief description of this subcomponent, for display in the Editor's configuration window.
  <br>
  <br>
  <b>Global Hotkey:</b>&nbsp; The keyboard shortcut or <a href="NamedKeyCommand.htm">Named Key Command</a>: to fire. The
  module will respond exactly as if one of the players had pressed this key or selected a menu item corresponding to a
  named key command.<br>
  <br>
  <b>Match Properties:</b>&nbsp; A <a href="Properties.htm">Property Expression</a> that specifies when to fire the
  hotkey or Named Key Command. If the expression is true after any level of the Turn Counter advances, the hotkey will
  fire.<br>
  <br>
  <b>Report Format:</b>&nbsp; A <a href="MessageFormat.htm">Message Format</a> that will be echoed to the chat log when
  the hotkey fires.<br>
  </td>
  <td valign="top"><img alt="" src="images/TurnTrackerGlobalHotkey.png"></td>
  </tr>
  </tbody>
</table>
</body>
</html>
